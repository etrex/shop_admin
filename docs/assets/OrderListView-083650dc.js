import{_ as T,p as B,q as P,s as A,v as b,r as v,o as E,a as u,x as U,b as S,d as I,h as f,e as n,w as o,u as q,y as F,g as H,E as R,m as l,i as c}from"./index-ac2423d8.js";const Y={class:"order-list"},j={class:"page-header"},G={class:"pagination-container"},J={__name:"OrderListView",setup(K){const h=B();P();const y=A(),w=b(()=>{const e=y.getAllOrders,t=(i.value-1)*d.value,r=t+d.value;return e.slice(t,r)}),p=v(!1),i=v(1),d=v(10),C=b(()=>y.getAllOrders.length),M=e=>{if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";const r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),g=String(t.getDate()).padStart(2,"0"),_=String(t.getHours()).padStart(2,"0"),m=String(t.getMinutes()).padStart(2,"0");return`${r}-${s}-${g} ${_}:${m}`},O=e=>e.toLocaleString(),x=e=>({pending:"待處理",confirmed:"已確認",processing:"處理中",shipped:"已出貨",completed:"已完成",cancelled:"已取消"})[e]||e,z=e=>({pending:"warning",confirmed:"info",processing:"primary",shipped:"success",completed:"success",cancelled:"danger"})[e]||"info",D=e=>({online:"線上付款",cod:"貨到付款"})[e]||e,$=e=>{h.push({name:"order-detail",params:{id:e}})},k=e=>{i.value=e},N=e=>{d.value=e,i.value=1},L=async()=>{p.value=!0;try{await new Promise(e=>setTimeout(e,100))}catch(e){console.error("獲取訂單列表失敗：",e),R.error("獲取訂單列表失敗")}finally{p.value=!1}};return E(()=>{L()}),(e,t)=>{const r=u("el-button"),s=u("el-table-column"),g=u("el-tag"),_=u("el-table"),m=u("el-pagination"),V=U("loading");return S(),I("div",Y,[f("div",j,[t[4]||(t[4]=f("h2",null,"我的訂單",-1)),n(r,{type:"primary",onClick:t[0]||(t[0]=a=>q(h).push({name:"order-create"}))},{default:o(()=>t[3]||(t[3]=[l(" 建立新訂單 ")])),_:1})]),F((S(),H(_,{data:w.value,style:{width:"100%"}},{default:o(()=>[n(s,{prop:"id",label:"訂單編號",width:"120"}),n(s,{label:"建立時間",width:"180"},{default:o(({row:a})=>[l(c(M(a.createdAt)),1)]),_:1}),n(s,{prop:"total",label:"訂單金額",width:"120"},{default:o(({row:a})=>[l(" NT$ "+c(O(a.total)),1)]),_:1}),n(s,{prop:"status",label:"訂單狀態",width:"120"},{default:o(({row:a})=>[n(g,{type:z(a.status)},{default:o(()=>[l(c(x(a.status)),1)]),_:2},1032,["type"])]),_:1}),n(s,{prop:"payment.method",label:"付款方式",width:"120"},{default:o(({row:a})=>[l(c(D(a.payment.method)),1)]),_:1}),n(s,{label:"操作",width:"120"},{default:o(({row:a})=>[n(r,{type:"primary",link:"",onClick:Q=>$(a.id)},{default:o(()=>t[5]||(t[5]=[l(" 查看詳情 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[V,p.value]]),f("div",G,[n(m,{"current-page":i.value,"onUpdate:currentPage":t[1]||(t[1]=a=>i.value=a),"page-size":d.value,"onUpdate:pageSize":t[2]||(t[2]=a=>d.value=a),total:C.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:N,onCurrentChange:k},null,8,["current-page","page-size","total"])])])}}},X=T(J,[["__scopeId","data-v-13b6098d"]]);export{X as default};
