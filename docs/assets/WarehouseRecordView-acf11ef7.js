import{u as T}from"./warehouse-f7a4791c.js";import{_ as W,r as b,v as F,o as I,a as d,b as g,d as w,h as c,e as t,w as a,m as n,i as s,F as A,f as U,g as q,B as E}from"./index-e1c6c1fc.js";const H={class:"warehouse-record"},L={class:"main-content"},Y={class:"card-header"},j={class:"filters"},G={class:"source-info"},J={__name:"WarehouseRecordView",setup(K){const y=T(),m=b("all"),f=b(null),h=b(!1),o=b(null),$=F(()=>{let r=y.getAllRecords;if(m.value!=="all"&&(r=r.filter(e=>e.type===m.value)),f.value){const[e,p]=f.value;r=r.filter(V=>{const v=new Date(V.createdAt);return v>=e&&v<=p})}return r}),B=r=>{o.value=r,h.value=!0},k=r=>{const e=new Date(r);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`};return I(()=>{y.getAllRecords.length===0&&y.initializeMockData()}),(r,e)=>{var D;const p=d("el-radio-button"),V=d("el-radio-group"),v=d("el-date-picker"),i=d("el-table-column"),S=d("el-tag"),C=d("el-button"),x=d("el-table"),z=d("el-card"),_=d("el-descriptions-item"),M=d("el-descriptions"),N=d("el-dialog");return g(),w("div",H,[e[7]||(e[7]=c("div",{class:"page-header"},[c("h2",null,"倉庫出入庫紀錄")],-1)),c("div",L,[t(z,null,{header:a(()=>[c("div",Y,[c("div",j,[t(V,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),size:"small"},{default:a(()=>[t(p,{label:"all"},{default:a(()=>e[3]||(e[3]=[n("全部")])),_:1}),t(p,{label:"in"},{default:a(()=>e[4]||(e[4]=[n("入庫")])),_:1}),t(p,{label:"out"},{default:a(()=>e[5]||(e[5]=[n("出庫")])),_:1})]),_:1},8,["modelValue"]),t(v,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),type:"daterange","range-separator":"至","start-placeholder":"開始日期","end-placeholder":"結束日期",size:"small",style:{"margin-left":"16px"}},null,8,["modelValue"])])])]),default:a(()=>[t(x,{data:$.value,style:{width:"100%"}},{default:a(()=>[t(i,{prop:"id",label:"紀錄編號",width:"120"}),t(i,{label:"類型",width:"100"},{default:a(({row:l})=>[t(S,{type:l.type==="in"?"success":"warning"},{default:a(()=>[n(s(l.type==="in"?"入庫":"出庫"),1)]),_:2},1032,["type"])]),_:1}),t(i,{prop:"createdAt",label:"時間",width:"160"},{default:a(({row:l})=>[n(s(k(l.createdAt)),1)]),_:1}),t(i,{label:"來源"},{default:a(({row:l})=>{var u,R;return[c("div",null,s(l.sourceType==="purchase_order"?"進貨單":"訂單")+"："+s(l.sourceId),1),c("div",G,s(l.type==="in"?(u=l.supplier)==null?void 0:u.name:(R=l.customer)==null?void 0:R.name),1)]}),_:1}),t(i,{label:"商品"},{default:a(({row:l})=>[(g(!0),w(A,null,U(l.items,u=>(g(),q(S,{key:u.id,size:"small",type:l.type==="in"?"success":"warning",class:"product-tag"},{default:a(()=>[n(s(u.name)+" x "+s(u.quantity),1)]),_:2},1032,["type"]))),128))]),_:1}),t(i,{label:"操作",width:"120"},{default:a(({row:l})=>[t(C,{type:"primary",link:"",onClick:u=>B(l)},{default:a(()=>e[6]||(e[6]=[n(" 詳情 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),t(N,{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=l=>h.value=l),title:((D=o.value)==null?void 0:D.type)==="in"?"入庫詳情":"出庫詳情",width:"600px"},{default:a(()=>[o.value?(g(),w(A,{key:0},[t(M,{column:2,border:""},{default:a(()=>[t(_,{label:"紀錄編號"},{default:a(()=>[n(s(o.value.id),1)]),_:1}),t(_,{label:"時間"},{default:a(()=>[n(s(k(o.value.createdAt)),1)]),_:1}),t(_,{label:"來源類型"},{default:a(()=>[n(s(o.value.sourceType==="purchase_order"?"進貨單":"訂單"),1)]),_:1}),t(_,{label:"來源編號"},{default:a(()=>[n(s(o.value.sourceId),1)]),_:1}),t(_,{label:o.value.type==="in"?"供應商":"客戶"},{default:a(()=>{var l,u;return[n(s(o.value.type==="in"?(l=o.value.supplier)==null?void 0:l.name:(u=o.value.customer)==null?void 0:u.name),1)]}),_:1},8,["label"])]),_:1}),t(x,{data:o.value.items,style:{width:"100%","margin-top":"16px"}},{default:a(()=>[t(i,{prop:"name",label:"商品名稱"}),t(i,{prop:"quantity",label:"數量",width:"120"}),t(i,{prop:"note",label:"備註"})]),_:1},8,["data"])],64)):E("",!0)]),_:1},8,["modelValue","title"])])}}},Q=W(J,[["__scopeId","data-v-ccb061a4"]]);export{Q as default};
