import{D as i}from"./index-e1c6c1fc.js";const u=i("warehouse",{state:()=>({warehouseRecords:[],inventory:{}}),getters:{getAllRecords:e=>e.warehouseRecords,getInboundRecords:e=>e.warehouseRecords.filter(r=>r.type==="in"),getOutboundRecords:e=>e.warehouseRecords.filter(r=>r.type==="out"),getInventory:e=>r=>e.inventory[r]||0},actions:{createInboundRecord(e,r){const o="WH-IN-"+String(this.warehouseRecords.length+1).padStart(3,"0"),n={id:o,type:"in",createdAt:new Date().toISOString(),sourceType:"purchase_order",sourceId:e.id,supplier:e.supplier,items:r.items.map(t=>{const s=this.inventory[t.id]||0;return this.inventory[t.id]=s+t.receivedQty,{id:t.id,name:e.items.find(d=>d.id===t.id).name,quantity:t.receivedQty,note:t.note}})};return this.warehouseRecords.push(n),o},createOutboundRecord(e,r){const o="WH-OUT-"+String(this.warehouseRecords.length+1).padStart(3,"0"),n={id:o,type:"out",createdAt:new Date().toISOString(),sourceType:"order",sourceId:e.id,customer:e.customer,items:r.items.map(t=>{const s=this.inventory[t.id]||0;return this.inventory[t.id]=s-t.pickedQty,{id:t.id,name:e.products.find(d=>d.id===t.id).name,quantity:t.pickedQty,note:t.note}})};return this.warehouseRecords.push(n),o},initializeMockData(){this.inventory={P001:20,P002:15,P003:25,P004:30},this.warehouseRecords=[{id:"WH-IN-001",type:"in",createdAt:"2024-01-15T10:00:00",sourceType:"purchase_order",sourceId:"PO-001",supplier:{id:"S001",name:"法國酒商"},items:[{id:"P001",name:"法國波爾多紅酒 2018",quantity:20,note:"正常入庫"}]},{id:"WH-OUT-001",type:"out",createdAt:"2024-01-16T14:00:00",sourceType:"order",sourceId:"ORD-001",customer:{name:"王小明"},items:[{id:"P001",name:"法國波爾多紅酒 2018",quantity:2,note:"正常出貨"}]}]}}});export{u};
